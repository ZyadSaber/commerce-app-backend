"use strict";(self.webpackChunkcommerce_app=self.webpackChunkcommerce_app||[]).push([[82],{3082:(e,a,n)=>{n.r(a),n.d(a,{default:()=>f});var s=n(2791),t=n(5516),l=n(5104),d=n(1626),r=n(8446),i=n(3708),c=n(184);const o=e=>{let{width:a,onSearch:n,margin:s="0",onClear:t,noSearch:l,noClear:r,disabled:o}=e;return(0,c.jsxs)(d.Z,{width:a,wrap:!0,justifyContent:"space-between",margin:s,align:"center",children:[(0,c.jsx)(i.Z,{hidden:l,disabled:o,icon:"search",onClick:n,label:"srch",width:r?"100%":"70%"}),(0,c.jsx)(i.Z,{width:l?"100%":"25%",hidden:r,disabled:o,icon:"clear",onClick:t,backGround:"white",padding:"5px 15px"})]})},h=(0,s.memo)(o);var m=n(5424),u=n(3510),p=n(1222);const _=e=>{let{user_id:a}=e;const[n,t]=(0,s.useState)([]),r=(0,s.useCallback)((e=>t(null===e||void 0===e?void 0:e.data)),[t]),{runFetch:o}=(0,l.ib)({apiId:"QUERY_USER_PERMISSIONS",params:{user_id:a},fetchOnFirstRun:!0,checkForParams:!0,onResponse:r}),{mutate:h,loading:m}=(0,l.Db)({apiId:"POST_USER_PERMISSIONS",method:"POST"}),_=(0,s.useCallback)((()=>{h({data:n,cb:e=>{let{error:a}=e;a&&(0,p.Z)("error",a.message),a||(o(),(0,p.Z)("success"))}})}),[n,h,o]),g=(0,s.useCallback)(((e,a)=>{const{name:s,value:l}=e,d=n&&n.map((e=>a===e.page_id?{...e,page_permissions:{...e.page_permissions,[s]:l}}:e));t(d)}),[n]),w=(0,s.useCallback)((e=>{const{name:a,value:s}=e,l=n&&n.map((e=>a===e.page_id?{...e,status:s}:e));t(l)}),[n]);return(0,c.jsxs)(d.Z,{width:"25%",wrap:!0,align:"center",flexDirection:"column",children:[(0,c.jsx)(i.Z,{width:"80%",label:"save",onClick:_,loading:m}),0!==n.length&&n.map((e=>{const{status:a,page_name:n,page_link:s,page_id:t,page_permissions:l}=e,{can_add:r,can_edit:i,can_delete:o,can_print:h}=l;return(0,c.jsxs)(d.Z,{width:"80%",wrap:!0,flexDirection:"column",gap:"10px",bordered:!0,margin:"10px 0",children:[(0,c.jsx)(u.Z,{label:"".concat(n," / ").concat(s),checked:a,name:t,onChange:w}),(0,c.jsxs)(d.Z,{width:"100%",justifyContent:"center",align:"center",gap:"5px",wrap:!0,children:[void 0!==r&&(0,c.jsx)(u.Z,{label:"add",checked:r,onChange:e=>g(e,t),name:"can_add"}),void 0!==i&&(0,c.jsx)(u.Z,{label:"edit",checked:i,onChange:e=>g(e,t),name:"can_edit"}),void 0!==o&&(0,c.jsx)(u.Z,{label:"delete",checked:o,onChange:e=>g(e,t),name:"can_delete"}),void 0!==h&&(0,c.jsx)(u.Z,{label:"print",checked:h,onChange:e=>g(e,t),name:"can_print"})]})]})}))]})},g=(0,s.memo)(_);var w=n(4908);const b=e=>{let{selectedRecord:a,handleClose:n,handleSaveRecord:t,loading:i,visible:o,fetchTableData:h}=e;const{state:m,onChange:u}=(0,l.BM)({initialValues:{...a,password:a.password||"",confirm_password:a.confirm_password||""}}),{first_name:_,last_name:g,user_name:b,password:x,confirm_password:C}=m,j=(0,s.useCallback)((()=>{x===C?t({data:m,cb:e=>{let{error:a}=e;if(a)return(0,p.Z)("error",a.message);n(),h(),(0,p.Z)("success")}}):(0,p.Z)("error","Please check your password")}),[C,h,n,t,x,m]);return(0,c.jsx)(w.Z,{label:"dtls",onClose:n,onOK:j,loading:i,visible:o,children:(0,c.jsxs)(d.Z,{width:"100%",align:"center",wrap:!0,gap:"10px",children:[(0,c.jsx)(r.Z,{name:"user_name",onChange:u,value:b,label:"usrnm",width:"32%"}),(0,c.jsx)(r.Z,{name:"first_name",onChange:u,value:_,width:"32%",label:"frstnm"}),(0,c.jsx)(r.Z,{name:"last_name",onChange:u,value:g,width:"32%",label:"lstnm"}),(0,c.jsx)(r.Z,{name:"password",onChange:u,value:x,width:"49%",label:"password",type:"password"}),(0,c.jsx)(r.Z,{name:"confirm_password",onChange:u,value:C,width:"49%",label:"confirm password",type:"password"})]})})},x=(0,s.memo)(b),C=[{title:"id",dataIndex:"user_id",width:"5%"},{title:"usrnm",dataIndex:"user_name",width:"20%"},{title:"frstnm",dataIndex:"first_name",width:"20%"},{title:"lstnm",dataIndex:"last_name",width:"20%"},{title:"lnge",dataIndex:"language_name",width:"7.5%"},{title:"sts",dataIndex:"status",width:"5%"}],j=()=>{const{state:{user_name:e,first_name:a,last_name:n},onChange:i,resetForm:o}=(0,l.BM)({initialValues:{user_id:"",user_name:"",first_name:"",last_name:""}}),{tableRef:u,fetchTableData:p,resetTable:_}=(0,t.R$)(),{selectedRecord:w,setSelectedRecord:b,visible:j,handleClose:f,handleAdd:Z,handleEdit:v,handleDelete:S,handleSaveRecord:k,loading:R}=(0,t.FS)({apiId:"POST_USER_TABLE_DATA",runFetch:p}),{user_id:I}=w||{},E=(0,s.useCallback)((()=>{p({user_name:e,first_name:a,last_name:n})}),[p,a,n,e]),T=(0,s.useCallback)((()=>{_(),o(),b({})}),[o,_,b]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(m.V1,{children:"usrstp"}),(0,c.jsxs)(d.Z,{width:"100%",wrap:!0,gap:"10px",align:"center",padding:"10px 0",bordered:!0,children:[(0,c.jsx)(r.Z,{value:e,name:"user_name",label:"usrnm",onChange:i}),(0,c.jsx)(r.Z,{value:a,name:"first_name",label:"frstnm",onChange:i}),(0,c.jsx)(r.Z,{dir:"rtl",value:n,name:"last_name",label:"lstnm",onChange:i}),(0,c.jsx)(h,{onSearch:E,onClear:T})]}),(0,c.jsxs)(d.Z,{width:"100%",wrap:!0,justifyContent:"space-between",children:[(0,c.jsx)(t.ZP,{ref:u,apiId:"QUERY_USERS_TABLE_DATA",columns:C,fetchOnFirstRun:!0,rowKey:"user_id",width:"75%",onSelectedRow:b,disableAutoRefresh:!0,hideTools:!1,canAdd:!0,canDelete:!0,canEdit:!0,handleAdd:Z,handleEdit:v,handleDelete:S}),(0,c.jsx)(g,{user_id:I}),j&&(0,c.jsx)(x,{visible:j,selectedRecord:w,handleClose:f,handleSaveRecord:k,loading:R,fetchTableData:p})]})]})},f=(0,s.memo)(j)}}]);
//# sourceMappingURL=82.f37ab518.chunk.js.map